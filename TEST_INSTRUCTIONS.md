# 牌局明细功能测试说明

## 功能概述
按照产品需求，重新实现了牌局明细表功能，导航流程如下：
**记录列表 → 牌局明细表 → 排行榜**

## 修改内容

### 1. 新增牌局明细表页面
- **路径**: `/pages/rounds-detail/index`
- **页面**: 展示指定牌局的每局得分明细
- **功能**: 
  - 显示牌局基本信息（时间、参与者数量）
  - 展示每局的各玩家得分变化
  - 提供跳转到排行榜的按钮

### 2. 修改导航流程
- **记录页面**: 已结束牌局的点击跳转从 `ranking` 改为 `rounds-detail`
- **明细页面**: 提供"查看牌局详情"按钮跳转到 `ranking`

## 测试步骤

### 1. 启动项目
```bash
在微信开发者工具中打开项目
点击"编译"按钮
确保编译成功，无错误信息
```

### 2. 测试导航流程
1. 点击底部Tab "记录"
2. 在记录列表中找到状态为"已结束"的牌局
3. 点击该牌局记录
4. **验证**: 应该跳转到牌局明细表页面，而不是排行榜
5. 在明细表页面点击底部"查看牌局详情"按钮
6. **验证**: 应该跳转到排行榜页面

### 3. 验证页面内容
**牌局明细表页面应该显示**:
- 顶部：牌局时间、参与者数量、状态
- 中间：每局明细列表（局号、时间、各玩家得分）
- 底部：查看牌局详情按钮

## 预期效果

### 页面结构
```
┌─────────────────────────────────────┐
│ 导航栏：牌局明细                    │
├─────────────────────────────────────┤
│ 2024-01-15 14:30  参与者：4人  已结束│
├─────────────────────────────────────┤
│ 每局明细                            │
│                                     │
│ 第3局    14:35                      │
│ 阿东 +10   阿凯 -5   小许 +2   老王 -7│
│                                     │
│ 第2局    14:25                      │
│ 阿东 -8    阿凯 +15  小许 -3   老王 -4│
│                                     │
│ 第1局    14:15                      │
│ 阿东 +5    阿凯 -2   小许 +1   老王 -4│
├─────────────────────────────────────┤
│ [查看牌局详情]                      │
└─────────────────────────────────────┘
```

## 注意事项

1. **数据来源**: 使用 `app.globalData.sessions` 中的现有数据
2. **时间格式**: 游戏时间显示为 "YYYY-MM-DD HH:mm"，局次时间显示为 "HH:mm"
3. **分数显示**: 正分显示红色带"+"号，负分显示绿色
4. **状态检查**: 只有已结束的牌局才能查看明细

## 故障排除

### 如果页面无法显示
1. 检查 `app.json` 是否添加了 `pages/rounds-detail/index` 路由
2. 检查控制台是否有JavaScript错误
3. 确认传递的 `sessionId` 参数正确

### 如果数据不显示
1. 检查 `app.globalData.sessions` 是否有数据
2. 确认点击的是已结束状态的牌局
3. 检查数据结构是否符合预期

## 文件清单

**新增文件**:
- `pages/rounds-detail/index.js`
- `pages/rounds-detail/index.wxml` 
- `pages/rounds-detail/index.wxss`
- `pages/rounds-detail/index.json`

**修改文件**:
- `app.json` (添加路由)
- `pages/records/records.js` (修改跳转逻辑)

**删除文件**:
- 之前错误实现的所有组件和页面文件

